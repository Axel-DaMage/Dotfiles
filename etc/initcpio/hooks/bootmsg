#!/usr/bin/bash

# Variables
MATRIX_COLOR="\x1b[32m"
BLUE_COLOR="\x1b[34m"
D4COLOR="\x1b[38;2;255;0;102m"
RED_COLOR="\e[1;31m"
PURPLE_COLOR="\x1b[35m"
RESET_COLOR="\x1b[0m"
COLUMNS=$(tput cols)
LINES=$(tput lines)
declare -A drops
NUM_DROPS=50
COUNTER=0
ASCII="                                                                                                                                                                                                             
   Lets all love lain!                                                                                                                                                   ▒▒▒██                                       
                                                                                                                                                                     ▒▒▒▒▒▒████                                      
                                                                                                                                                                 ▒▒▒▒▒▒▒▒▒██████                                     
                                                                                                                                                             ▒▒▒▒▒▒▒▒▒▒▒▒████████                                    
                                                                                                                                                         ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████                                   
                                                                                                                                                        ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████                                  
                                                                                                                                                       ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████████                                
                                                                                                                                                      ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████                                
                                                                                                                                                     ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒███████████████                               
                                                                                                                                                    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒████████████                              
                                                                                                                                                   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒███████▒▒▒████████████                             
                                                                                                                                                  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████████████                            
                                                                                                                                                 ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████████████████████                           
                                                                                                                                                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████████████████                          
                                                                                                                                               ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████████████████████████                         
                                                                                                                                              ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████████████████████                        
                                                                                                                                             ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████████████████████████████                       
                                                                                                                                            ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████████████████████████                      
                                                                                                                                           ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████████████████████████████████                     
                                                                                                                                          ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████████████▒▒▒▒▒█████████████████                    
                                                                                                                                         ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█████████████████▒▒▒▒▒▒▒▒▒████████████████                   
                                                                                                                                        ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█████████████████▒▒▒▒▒▒▒▒▒▒▒████████████████                  
                                                                                                                                       ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█████████████████▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████                 
                                                                                                                                      ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████████████▒▒▒▒▒▒▒▒▒▒▒▒▒█████████▒▒▒▒▒▒▒                 
                                                                                                                                     ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒███████████████████▒▒▒▒▒▒▒▒▒▒▒▒▒█████████████████                
    ▒▒▒███     ▒▒▒████▒▒██████████████▒▒████           ▒▒███████████████▒▒███████████████▒▒██        ▒▒▒██▒▒███████████████         ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████████▒▒▒▒▒▒▒▒▒▒▒▒▒██████████████████               
▒▒▒▒▒▒▒███  ▒▒▒▒▒▒████▒▒██████████████▒▒████       ▒▒▒▒▒▒███████████████▒▒███████████████▒▒████   ▒▒▒▒████▒▒███████████████        ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████████████              
▒▒▒▒▒▒▒███▒▒████▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒███▒▒████   ▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒▒████▒▒█████▒▒▒▒██████▒▒███▒▒▒▒▒▒▒▒▒▒         ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█████████████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█████████████             
▒▒▒▒▒▒▒███████████████▒▒██████████████▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒███▒▒████▒▒███████████████▒▒███████████████      ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████████            
▒▒▒▒▒▒▒███████████████▒▒██████████████▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒███▒▒████▒▒███████████████▒▒███████████████     ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████▒▒▒▒   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████           
▒▒▒▒▒▒▒█████▒▒▒▒██████▒▒▒▒▒▒▒▒▒▒▒▒▒███▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒▒████▒▒████▒▒███▒▒████▒▒███▒▒▒▒▒▒▒▒▒▒      ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████▒▒▒       ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████          
▒▒▒▒▒▒▒███▒▒▒▒▒▒▒▒████▒▒██████████████▒▒███████████████▒▒███████████████▒▒███████████████▒▒████▒▒▒▒▒▒▒████▒▒███████████████   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█████▒            ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█████         
▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒██▒▒██████████████▒▒███████████████▒▒███████████████▒▒███████████████▒▒████▒▒▒▒▒▒▒████▒▒███████████████  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒                    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒              
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒                           ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒                  
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒      ▒▒▒▒▒▒▒▒▒▒▒▒                                   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒                      
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒         ▒▒▒▒▒▒▒▒▒                                         ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒                          
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒            ▒▒▒▒▒▒                                                  ▒▒▒▒▒▒                              
▒▒▒▒▒▒▒███████████████▒▒███▒▒▒▒▒▒▒▒████▒▒██▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒███████████████▒▒██████████████                ▒▒▒████    ▒▒▒████▒▒████▒███████████████▒▒████    ▒▒▒████▒▒███████████████▒▒██████████████  
▒▒▒▒▒▒▒███████████████▒▒███▒▒▒▒▒▒▒▒████▒▒███▒▒▒▒▒▒▒▒███▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒███████████████▒▒██████████████            ▒▒▒▒▒▒▒████▒▒▒▒▒▒▒████▒▒████▒███████████████▒▒████▒▒▒▒▒▒▒████▒▒███████████████▒▒██████████████  
▒▒▒▒▒▒▒████▒▒▒▒▒▒▒████▒▒███▒▒▒▒▒▒▒▒████▒▒█████▒▒▒▒█████▒▒▒▒▒▒▒▒▒▒▒▒█████▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒███        ▒▒▒▒▒▒▒▒▒▒▒████▒▒███▒▒████▒▒████▒▒▒▒▒▒▒▒▒█████▒▒▒▒████▒▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒███▒▒▒▒▒▒▒▒███  
▒▒▒▒▒▒▒████▒▒▒▒▒▒▒████▒▒███████████████▒▒██████████████▒▒▒▒▒▒▒▒▒▒███████▒▒████▒▒▒▒▒▒▒▒▒██▒▒██████████████    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒███████████████▒▒████▒▒▒▒▒▒▒██████▒▒▒▒▒███████████████▒▒███████████████▒▒███▒▒▒▒▒▒▒▒███  
▒▒▒▒▒▒▒████▒▒▒▒▒██████▒▒███████████████▒▒██████████████▒▒▒▒▒▒▒▒█████████▒▒████▒▒▒▒▒▒▒▒███▒▒██████████████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒███████████████▒▒████▒▒▒▒▒██████▒▒▒▒▒▒▒███████████████▒▒███████████████▒▒███▒▒▒▒▒▒█████  
▒▒▒▒▒▒▒████▒▒▒▒█████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒███▒▒████▒▒███▒▒▒▒▒▒█████▒▒████▒▒████▒▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒███▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████▒▒▒██████▒▒████▒▒▒██████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒████▒██████▒▒▒▒▒▒███▒▒▒▒██████   
▒▒▒▒▒▒▒████▒▒█████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒███▒▒▒▒▒▒▒▒███▒▒▒▒██████▒▒▒████▒▒███████████████▒▒██████████████▒▒███████████████▒▒████▒▒▒▒▒▒▒████▒▒████▒███████████████▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒████▒▒▒██████▒▒▒▒███▒▒██████     
▒▒▒▒▒▒▒█████████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒███▒▒▒▒▒▒▒▒███▒▒██████▒▒▒▒▒████▒▒███████████████▒▒██████████████▒▒███████████████▒▒██▒▒▒▒▒▒▒▒▒▒▒██▒▒████████████████████▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒████▒▒▒▒▒██████▒▒█████████       
▒▒▒▒▒▒▒███████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒███████         
▒▒▒▒▒▒▒██████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒█████           
▒▒▒▒▒▒▒████  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒███             
▒▒▒▒▒▒▒██    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒      ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██              
▒▒▒▒▒▒       ▒▒▒▒▒▒▒▒▒▒▒▒▒    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒        ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒          ▒▒▒▒▒▒▒▒▒▒▒▒  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒                 
"

# Main Matrix function
matrix_effect() {
  local start_time=$(date +%s) # Set Startup time 
  while true; do
    local current_time=$(date +%s)
    if [ $((current_time - start_time)) -ge 6 ]; then
      break # Exit loop after 6 seconds
    fi

    local num_caracteres=$((LINES * COLUMNS / 20)) 
    for i in $(seq 1 "$num_caracteres"); do
      local fila_aleatoria=$((RANDOM % LINES))
      local columna_aleatoria=$((RANDOM % COLUMNS))
      tput cup "$fila_aleatoria" "$columna_aleatoria"
      printf "${MATRIX_COLOR}$((RANDOM % 9))${RESET_COLOR}"
    done
  done
}

# Reveal text function
reveal_text() {
  local text="$1"
  local delay="${2:-0.01}" # change this if you want a different delay
  while IFS= read -r -n1 char; do
    printf "%s" "$char"
    sleep "$delay"
  done <<< "$text"
  printf "\n"
}

# Main hook (all of this will be on the screen)
run_hook() {
  matrix_effect
  printf "${RESET_COLOR}"
  clear
  printf "${D4COLOR}"
  printf "▓█████▄  ▄▄▄       ███▄ ▄███▓ ▄▄▄        ▄████ ▓█████   \n"
  printf "▒██▀ ██▌▒████▄    ▓██▒▀█▀ ██▒▒████▄     ██▒ ▀█▒▓█   ▀   \n"
  printf "▒██   █▌▒██  ▀█▄  ▓██    ▓██▒▒██  ▀█▄  ▒██▒▄▄▄▒▒███     \n"
  printf "▒▓█▄   ▌▒██▄▄▄▄██ ▒██    ▒██ ▒██▄▄▄▄██ ▒▓█  ██▓▒▓█  ▄   \n"
  printf "▒▒████▓  ▓█   ▓██▒▒██▒   ▒██▒ ▓█   ▓██▒▒▒▓███▀▒▒▒████▒  \n"
  printf " ▒▒▓  ▒  ▒▒   ▓▒█▒▒ ▒▒   ▒  ▒ ▒▒   ▓▒█▒ ▒▒   ▒ ▒▒ ▒▒ ▒  \n"
  printf " ▒ ▒  ▒   ▒   ▒▒ ▒▒  ▒      ▒  ▒   ▒▒ ▒  ▒   ▒  ▒ ▒  ▒  \n"
  printf " ▒ ▒  ▒   ▒   ▒   ▒      ▒     ▒   ▒   ▒ ▒   ▒    ▒     \n"
  printf "   ▒          ▒  ▒       ▒         ▒  ▒      ▒    ▒  ▒  \n"
  printf " ▒                                                      \n"
  printf "\n \n"
  printf "${BLUE_COLOR}"
  reveal_text "--Starting boot sequence..."
  sleep 1s
  printf "${D4COLOR}"
  reveal_text "--Initializing system core..."
  sleep 0.5s
  printf "${BLUE_COLOR}"
  reveal_text "--detecting hardware..."
  printf "\n\n${D4COLOR}"
  reveal_text "CPU:      AMD Ryzen 5 4600H (Threads)   [OK]"
  reveal_text "Memory:   16GB DDR4                     [OK]"
  reveal_text "Storage:  500GB NVMe                    [OK]"
  reveal_text "Network:  10GbE Dual Port               [OK]"
  reveal_text "GPU:      NVIDIA GeForce 1650 Mobile    [OK]"
  sleep 0.2s
  printf "\n${BLUE_COLOR}"
  reveal_text "--Loading kernel modules..."
  printf "\n\n${RED_COLOR}"
  reveal_text "Filesystem            (ZFS)             [OK]"
  reveal_text "Network               (TCP/IP v6)       [OK]"
  reveal_text "Graphics              (CUDA)            [OK]"
  reveal_text "Security:             (Armor)           [OK]"
  reveal_text "Virtualization        (KVM)             [OK]"
  printf "\n"
  sleep 0.5s
  printf "${BLUE_COLOR}"
  reveal_text "--Starting services..."
  printf "\n"
  printf "\n"
  printf "${PURPLE_COLOR}"
  reveal_text "System Logging         (Syslog-ng)      [OK]"
  reveal_text "Database               (SQL)            [OK]"
  reveal_text "Web Server             (Nginx)          [OK]"
  reveal_text "Distributed Computing  (Hadoop)         [OK]"
  reveal_text "AI Framework           (TensorFlow)     [OK]"
  printf " \n"
  printf "${BLUE_COLOR}"
  reveal_text "--Starting user interface..."
  printf " \n"
  printf " \n"
  printf "${MATRIX_COLOR}"
  reveal_text "Display Manager      (GDM)              [OK]"
  reveal_text "Desktop Environment  (Hyprland)         [OK]"
  reveal_text "Application Launch   (Terminal)         [OK]"
  printf "${BLUE_COLOR} \n"
  reveal_text "--Computing Hash... "
  printf "\n\n"
  printf "${D4COLOR}"
  reveal_text " System startup complete."
  reveal_text " User: D4MAG3 "
  sleep 2s
  clear
  printf "\e[2;31m] ${ASCII}\n"
  sleep 2s
  clear
}

run_hook